(()=>{const e=document.getElementById("url_form"),t=document.getElementById("url_input"),o=`http://${location.hostname}/api/shorturl`,n=document.getElementById("message_modal"),r=document.getElementById("url_shortened"),i=document.getElementById("btn_clipboard");function a(e){let t="";t=void 0!==e.error?e.error:`${o}/${e.short_url}`,r.value=t,n.style.display="block"}function l(e="reset"){const t={emoji:"üìã",title:"Copy to Clipboard"};i.removeAttribute("disabled"),"copied"===e&&(t.emoji="‚úîÔ∏è",t.title="Copied to Clipboard"),"disabled"===e&&i.setAttribute("disabled",!0),i.innerText=t.emoji,i.title=t.title}e.addEventListener("submit",(async function(o){try{l("reset"),o.preventDefault();const n=new URLSearchParams({url:t.value}),r=await async function(e,t){try{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()}),n=await o.json();return console.log("result",n),n}catch(e){throw new Error("Creating the shortened URL failed, please try again.")}}(e.action,n);a(r)}catch(e){l("disabled"),a({error:e.message})}})),i.addEventListener("click",(function(e){navigator.clipboard.writeText(r.value),l("copied")}))})();